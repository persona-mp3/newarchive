<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <title>Login</title>
</head>
<body>

    <h2>Login Page</h2>
    <form  id="loginForm">
        <label>Email: <input type="email" name="email"></label>
        <label>Password: <input type="password" name="password"></label>

        <button type="submit">Login</button>
    </form>
    
</body>


    <script>
        const form = document.getElementById('loginForm');
        // const server = 'http://localhost:3000/'

        async function sendData(){
    const formData = new FormData(form);

    try{
        const response = await fetch('http://localhost:3000/login', {
            method: 'POST',
            body: formData,
        });

        if (response.ok){
            alert('Status: Logged-in')
            window.location.href = '/'
        }else if(response.status === 401){
            alert(`Email address not found/ Incorrect password`)
        }
        else{
            // console.log('ERROR BELOW')
            console.error(response.status);
            alert('FAILED TO SUBMIT')
        }

        const responseData = await response.json
        console.log(responseData)
    }catch(e){console.error(e)}
}

    form.addEventListener('submit', (e) => {
        e.preventDefault()
        sendData()
    })

    </script>
</html>